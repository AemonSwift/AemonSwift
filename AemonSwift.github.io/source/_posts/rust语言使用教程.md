---
title: rust语言使用教程
date: 2019-11-06 09:39:50
tags:
---
## 变量和可变性
变量定义采用的是let关键字，变量默认是不可改变的（immutable）,若要定义可变的变量，还需要加关键字mut.
```rust 
let x=5; 
x=6; //x为变量为不可变的，故报错

let mut y=1; //可变的变量
y=6;
```
常量：不允许对常量使用 mut。常量不光默认不能变，它总是不能变。声明常量使用 const 关键字而不是 let，并且 必须 注明值的类型。
Rust 常量的命名规范是使用下划线分隔的大写字母单词，并且可以在数字字面值中插入下划线来提升可读性
```rust
const MAX_POINTS: u32=100_000
```
变量的隐藏：我们可以定义一个与之前变量同名的新变量，而新变量会 隐藏 之前的变量。这意味着使用这个变量时会看到第二个值。可以用相同变量名称来隐藏一个变量，以及重复使用 let 关键字来多次隐藏，
```rust
    let x = 5;
    let x = x + 1;
    let x = x * 2;
```
隐藏与将变量标记为 mut 是有区别的。当不小心尝试对变量重新赋值时，如果没有使用 let 关键字，就会导致编译时错误。通过使用 let，我们可以用这个值进行一些计算，不过计算完之后变量仍然是不变的。
mut 与隐藏的另一个区别是，当再次使用 let 时，实际上创建了一个新变量，我们可以改变值的类型，但复用这个名字。
```rust
let spaces = "   ";
let spaces = spaces.len(); //正确

let mut spaces = "   ";
spaces = spaces.len(); //错误
```
类型：i8,u8,i16,u16,i32,u32,i64,u64,isize,usize(这两个类似int),f32,f64
字面值：98_222(98222),0xff,0o77,0b1111_0000,b'A'(u8的字节型)
rust的release的构建中，是不会检测数据的溢出，依赖整型溢出被认为是一种错误，即便可能出现这种行为。如果你确实需要这种行为，标准库中有一个类型显式提供此功能，Wrapping。